<!DOCTYPE html>
<html>
	<head>
		<title>UChicago Marketplace</title>
		<script src="main.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="root"></div>
		<div id="bottom"></div>
		<script type="text/javascript">
			// Set up Elm runtime
			var root = document.getElementById("root");
			var app = Elm.embed(Elm.Main, root, {lastItemVisible : false});

		  // Infinite Scroll	
      function isElementInViewport (el) {
          var rect = el.getBoundingClientRect();
      
          return (
              rect.top >= 0 &&
              rect.left >= 0 &&
              rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
              rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */
          );
      }
      
      window.onscroll = function () {
      	var lastItem = document.getElementById("bottom");
      
      	if (isElementInViewport(lastItem)) {
      		app.ports.lastItemVisible.send(true);
      	}
      	else {
      		app.ports.lastItemVisible.send(false);
      	}
      };
	
			// Masonry
		</script>
	</body>
</html>	
